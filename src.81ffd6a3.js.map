{"version":3,"sources":["index.ts"],"names":[],"mappings":";AA6EC,aA7ED,IAAM,EAAiB,SAAS,eAAe,YACzC,EAAY,SAAS,eAAe,OACpC,EAAY,SAAS,eAAe,iBACpC,EAAa,SAAS,eAAe,kBAE3C,MAAA,GAAA,EAAY,iBAAiB,QAAS,WAClC,IAAM,EAAO,EAAW,UAClB,EAAe,SAAS,eAAe,gBACzC,GACA,UAAU,UAAU,UAAU,GACzB,KAAK,WACF,EAAa,UAAU,IAAI,QAC3B,WAAW,WACP,EAAa,UAAU,OAAO,SAC/B,MACJ,WACC,MAAM,mCAKtB,MAAA,GAAA,EAAgB,iBAAiB,QAAS,WAEtC,GAAK,GAAc,GAKnB,MAAK,aAAsB,cAIrB,aAAqB,kBAAuB,aAAqB,iBAAvE,CAIA,IAAM,EAAO,EAAU,MACjB,EAAO,EAAU,MAElB,GAAS,GAKd,aAAa,QAAQ,OAAQ,GAC7B,aAAa,QAAQ,OAAQ,GAE7B,EAAW,UAAY,EAAa,EAAM,IAPtC,MAAM,6CAhBN,MAAM,yCA0Bd,IAAM,EAAe,SAAC,EAAc,GAChC,IAAM,EAAM,IAAI,IAAI,GACd,EAAmB,YAAA,OAAY,GAEjC,EAAS,EAAI,SACb,EAAO,EAAI,SACX,EAAW,EAAI,SACf,EAAS,EAAI,aACb,EAAe,EAAO,KAAO,EAAI,IAAM,EAAO,WAAa,GAE/D,MAAO,GAAA,OAAG,EAAQ,MAAA,OAAK,EAAM,KAAA,OAAI,EAAgB,eAAA,OAAc,GAAI,OAAG,IAG1E,OAAO,OAAS,WACZ,IAAM,EAAO,aAAa,QAAQ,QAC5B,EAAO,aAAa,QAAQ,QAE9B,GAAQ,IACJ,aAAqB,kBAAoB,aAAqB,mBAC9D,EAAU,MAAQ,EAClB,EAAU,MAAQ,GAGlB,IACA,EAAW,UAAY,EAAa,EAAM","file":"src.81ffd6a3.js","sourceRoot":"../src","sourcesContent":["const generateButton = document.getElementById('generate');\nconst linkInput = document.getElementById('url');\nconst codeInput = document.getElementById('discount_code');\nconst outputLink = document.getElementById('generated_link');\n\noutputLink?.addEventListener('click', () => {\n    const text = outputLink.innerHTML;\n    const notification = document.getElementById('notification');\n    if (text) {\n        navigator.clipboard.writeText(text)\n            .then(() => {\n                notification.classList.add('show');\n                setTimeout(() => {\n                    notification.classList.remove('show');\n                }, 3000);\n            }, () => {\n                alert('Failed to copy to clipboard');\n            });\n    }\n});\n\ngenerateButton?.addEventListener('click', () => {\n\n    if (!linkInput || !codeInput) {\n        alert('Please enter link and discount code');\n        return;\n    }\n\n    if (!outputLink instanceof HTMLElement) {\n        return;\n    }\n\n    if (!(linkInput instanceof HTMLInputElement) || !(codeInput instanceof HTMLInputElement)) {\n        return;\n    }\n\n    const link = linkInput.value;\n    const code = codeInput.value;\n\n    if (!link || !code) {\n        alert('Please enter link and discount code');\n        return;\n    }\n\n    localStorage.setItem('link', link);\n    localStorage.setItem('code', code);\n\n    outputLink.innerHTML = generateLink(link, code);\n});\n\nconst generateLink = (link: string, code: string) => {\n    const url = new URL(link);\n    const discountFragment = `discount/${code}`;\n\n    let domain = url.hostname;\n    let path = url.pathname;\n    let protocol = url.protocol;\n    let params = url.searchParams;\n    let paramsString = params.size > 0 ? '&' + params.toString() : '';\n\n    return `${protocol}//${domain}/${discountFragment}/?redirect=${path}${paramsString}`;\n}\n\nwindow.onload = () => {\n    const link = localStorage.getItem('link');\n    const code = localStorage.getItem('code');\n\n    if (link && code) {\n        if (linkInput instanceof HTMLInputElement && codeInput instanceof HTMLInputElement) {\n            linkInput.value = link;\n            codeInput.value = code;\n        }\n\n        if (outputLink) {\n            outputLink.innerHTML = generateLink(link, code);\n        }\n    }\n}"]}