{"version":3,"sources":["index.ts"],"names":[],"mappings":";;AAAA,IAAM,cAAc,GAAG,QAAQ,CAAC,cAAc,CAAC,cAAc,CAAC;AAC9D,IAAM,UAAU,GAAG,QAAQ,CAAC,cAAc,CAAC,YAAY,CAAC;AACxD,IAAM,YAAY,GAAG,QAAQ,CAAC,cAAc,CAAC,cAAc,CAAC;AAC5D,IAAM,UAAU,GAAG,QAAQ,CAAC,cAAc,CAAC,YAAY,CAAC;AAExD,cAAc,KAAA,IAAA,IAAd,cAAc,KAAA,KAAA,CAAA,GAAA,KAAA,CAAA,GAAd,cAAc,CAAE,gBAAgB,CAAC,OAAO,EAAE,YAAA;EAEtC,IAAI,CAAC,UAAU,IAAI,CAAC,YAAY,EAAE;IAC9B,KAAK,CAAC,qCAAqC,CAAC;IAC5C;;EAGJ,IAAI,CAAC,UAAU,EAAE;IACb;;EAGJ,IAAI,EAAE,UAAU,YAAY,gBAAgB,CAAC,IAAI,EAAE,YAAY,YAAY,gBAAgB,CAAC,EAAE;IAC1F;;EAGJ,IAAM,IAAI,GAAG,UAAU,CAAC,KAAK;EAC7B,IAAM,IAAI,GAAG,YAAY,CAAC,KAAK;EAE/B,IAAI,CAAC,IAAI,IAAI,CAAC,IAAI,EAAE;IAChB,KAAK,CAAC,qCAAqC,CAAC;IAC5C;;EAGJ,YAAY,CAAC,OAAO,CAAC,MAAM,EAAE,IAAI,CAAC;EAClC,YAAY,CAAC,OAAO,CAAC,MAAM,EAAE,IAAI,CAAC;EAElC,IAAM,MAAM,GAAG,YAAY,CAAC,IAAI,EAAE,IAAI,CAAC;EAEvC,UAAU,CAAC,SAAS,GAAG,MAAM;AACjC,CAAC,CAAC;AAEF,IAAM,YAAY,GAAG,SAAf,YAAY,CAAI,IAAY,EAAE,IAAY,EAAA;EAC5C,IAAM,GAAG,GAAG,IAAI,GAAG,CAAC,IAAI,CAAC;EACzB,IAAM,gBAAgB,GAAG,YAAA,CAAA,MAAA,CAAa,IAAI,CAAE;EAE5C,IAAI,MAAM,GAAG,GAAG,CAAC,QAAQ;EACzB,IAAI,IAAI,GAAG,GAAG,CAAC,QAAQ;EACvB,IAAI,QAAQ,GAAG,GAAG,CAAC,QAAQ;EAC3B,IAAI,MAAM,GAAG,GAAG,CAAC,YAAY;EAC7B,IAAI,YAAY,GAAG,MAAM,CAAC,IAAI,GAAG,CAAC,GAAG,GAAG,GAAG,MAAM,CAAC,QAAQ,CAAA,CAAE,GAAG,EAAE;EAEjE,OAAO,EAAA,CAAA,MAAA,CAAG,QAAQ,EAAA,IAAA,CAAA,CAAA,MAAA,CAAK,MAAM,EAAA,GAAA,CAAA,CAAA,MAAA,CAAI,gBAAgB,EAAA,aAAA,CAAA,CAAA,MAAA,CAAc,IAAI,CAAA,CAAA,MAAA,CAAG,YAAY,CAAE;AACxF,CAAC;AAED,MAAM,CAAC,MAAM,GAAG,YAAA;EACZ,IAAM,IAAI,GAAG,YAAY,CAAC,OAAO,CAAC,MAAM,CAAC;EACzC,IAAM,IAAI,GAAG,YAAY,CAAC,OAAO,CAAC,MAAM,CAAC;EAEzC,IAAI,IAAI,IAAI,IAAI,EAAE;IACd,IAAI,UAAU,YAAY,gBAAgB,IAAI,YAAY,YAAY,gBAAgB,EAAE;MACpF,UAAU,CAAC,KAAK,GAAG,IAAI;MACvB,YAAY,CAAC,KAAK,GAAG,IAAI;;IAG7B,IAAI,UAAU,EAAE;MACZ,UAAU,CAAC,SAAS,GAAG,YAAY,CAAC,IAAI,EAAE,IAAI,CAAC;;;AAG3D,CAAC","file":"src.77de5100.js","sourceRoot":"../src","sourcesContent":["const generateButton = document.getElementById('generateLink');\nconst originLink = document.getElementById('originLink');\nconst discountCode = document.getElementById('discountCode');\nconst outputLink = document.getElementById('outputLink');\n\ngenerateButton?.addEventListener('click', () => {\n\n    if (!originLink || !discountCode) {\n        alert('Please enter link and discount code');\n        return;\n    }\n\n    if (!outputLink) {\n        return;\n    }\n\n    if (!(originLink instanceof HTMLInputElement) || !(discountCode instanceof HTMLInputElement)) {\n        return;\n    }\n\n    const link = originLink.value;\n    const code = discountCode.value;\n\n    if (!link || !code) {\n        alert('Please enter link and discount code');\n        return;\n    }\n\n    localStorage.setItem('link', link);\n    localStorage.setItem('code', code);\n\n    const result = generateLink(link, code);\n\n    outputLink.innerHTML = result;\n});\n\nconst generateLink = (link: string, code: string) => {\n    const url = new URL(link);\n    const discountFragment = `/discount/${code}`;\n\n    let domain = url.hostname;\n    let path = url.pathname;\n    let protocol = url.protocol;\n    let params = url.searchParams;\n    let paramsString = params.size > 0 ? '&' + params.toString() : '';\n\n    return `${protocol}//${domain}/${discountFragment}/?redirect=${path}${paramsString}`;\n}\n\nwindow.onload = () => {\n    const link = localStorage.getItem('link');\n    const code = localStorage.getItem('code');\n\n    if (link && code) {\n        if (originLink instanceof HTMLInputElement && discountCode instanceof HTMLInputElement) {\n            originLink.value = link;\n            discountCode.value = code;\n        }\n\n        if (outputLink) {\n            outputLink.innerHTML = generateLink(link, code);\n        }\n    }\n}"]}