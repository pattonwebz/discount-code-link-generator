{"version":3,"sources":["index.ts"],"names":[],"mappings":";AA+DC,aA/DD,IAAM,EAAiB,SAAS,eAAe,gBACzC,EAAa,SAAS,eAAe,cACrC,EAAe,SAAS,eAAe,gBACvC,EAAa,SAAS,eAAe,cAE3C,MAAA,GAAA,EAAgB,iBAAiB,QAAS,WAEtC,GAAK,GAAe,GAKpB,GAAK,GAIC,aAAsB,kBAAuB,aAAwB,iBAA3E,CAIA,IAAM,EAAO,EAAW,MAClB,EAAO,EAAa,MAE1B,GAAK,GAAS,EAAd,CAKA,aAAa,QAAQ,OAAQ,GAC7B,aAAa,QAAQ,OAAQ,GAE7B,IAAM,EAAS,EAAa,EAAM,GAElC,EAAW,UAAY,OATnB,MAAM,6CAhBN,MAAM,yCA4Bd,IAAM,EAAe,SAAC,EAAc,GAChC,IAAM,EAAM,IAAI,IAAI,GACd,EAAmB,aAAA,OAAa,GAElC,EAAS,EAAI,SACb,EAAO,EAAI,SACX,EAAW,EAAI,SACf,EAAS,EAAI,aACb,EAAe,EAAO,KAAO,EAAI,IAAM,EAAO,WAAa,GAE/D,MAAO,GAAA,OAAG,EAAQ,MAAA,OAAK,EAAM,KAAA,OAAI,EAAgB,eAAA,OAAc,GAAI,OAAG,IAG1E,OAAO,OAAS,WACZ,IAAM,EAAO,aAAa,QAAQ,QAC5B,EAAO,aAAa,QAAQ,QAE9B,GAAQ,IACJ,aAAsB,kBAAoB,aAAwB,mBAClE,EAAW,MAAQ,EACnB,EAAa,MAAQ,GAGrB,IACA,EAAW,UAAY,EAAa,EAAM","file":"src.1e541d10.js","sourceRoot":"../src","sourcesContent":["const generateButton = document.getElementById('generateLink');\nconst originLink = document.getElementById('originLink');\nconst discountCode = document.getElementById('discountCode');\nconst outputLink = document.getElementById('outputLink');\n\ngenerateButton?.addEventListener('click', () => {\n\n    if (!originLink || !discountCode) {\n        alert('Please enter link and discount code');\n        return;\n    }\n\n    if (!outputLink) {\n        return;\n    }\n\n    if (!(originLink instanceof HTMLInputElement) || !(discountCode instanceof HTMLInputElement)) {\n        return;\n    }\n\n    const link = originLink.value;\n    const code = discountCode.value;\n\n    if (!link || !code) {\n        alert('Please enter link and discount code');\n        return;\n    }\n\n    localStorage.setItem('link', link);\n    localStorage.setItem('code', code);\n\n    const result = generateLink(link, code);\n\n    outputLink.innerHTML = result;\n});\n\nconst generateLink = (link: string, code: string) => {\n    const url = new URL(link);\n    const discountFragment = `/discount/${code}`;\n\n    let domain = url.hostname;\n    let path = url.pathname;\n    let protocol = url.protocol;\n    let params = url.searchParams;\n    let paramsString = params.size > 0 ? '&' + params.toString() : '';\n\n    return `${protocol}//${domain}/${discountFragment}/?redirect=${path}${paramsString}`;\n}\n\nwindow.onload = () => {\n    const link = localStorage.getItem('link');\n    const code = localStorage.getItem('code');\n\n    if (link && code) {\n        if (originLink instanceof HTMLInputElement && discountCode instanceof HTMLInputElement) {\n            originLink.value = link;\n            discountCode.value = code;\n        }\n\n        if (outputLink) {\n            outputLink.innerHTML = generateLink(link, code);\n        }\n    }\n}"]}